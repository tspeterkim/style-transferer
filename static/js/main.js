"use strict";$(function(){$(".styleImagePicker").imagepicker();var e=document.getElementById("output");e.width=500,e.height=500;e.getContext("2d");$("#transfer").click(function(){function e(){$.ajax({url:"/api/checkTransferStatus",method:"GET",contentType:"application/json",success:function(e){if(console.log(e.result),null!=e.result){$("#processing").hide();var t=e.result[0],l=document.getElementById("output"),n=l.getContext("2d");f=new ImageData(new Uint8ClampedArray(e.result[1]),t[1],t[0]),n.putImageData(f,0,0)}},complete:function(t){null!=f?(clearTimeout(y),f=null,$("#transfer").show()):setTimeout(e,5e3)}})}var t="";if(""==$("#contentImageUrl").val())t="static/imgs/hollywood.jpg";else{var l=$("#contentImageUrl").val(),n=l.split("/"),o=n[n.length-1];console.log(l),$.ajax({url:"/api/download_img",method:"POST",contentType:"application/json",data:JSON.stringify({url:l}),success:function(e){console.log("successfully downloaded content img: "+e.img)}}),t="instance/"+o}var s="";if(""==$("#styleImageUrl").val())s="static/imgs/"+$(".styleImagePicker").val();else{var a=$("#styleImageUrl").val(),i=a.split("/"),c=i[i.length-1];$.ajax({url:"/api/download_img",method:"POST",contentType:"application/json",data:JSON.stringify({url:a}),success:function(e){console.log("successfully downloaded style img: "+e.img)}}),s="instance/"+c}var r=Number($("#contentSize").val()),g=Number($("#styleSize").val()),u=Number($("#contentWeight").val()),m=$("#styleWeights").val().split(",").map(Number),p=Number($("#tvWeight").val());console.log(t),console.log(s),console.log(r),console.log(g),console.log(u),console.log(m),console.log(p);var d={content_image:t,style_image:s,image_size:r,style_size:g,content_layer:3,content_weight:u,style_layers:[1,4,6,7],style_weights:m,tv_weight:p};$.ajax({url:"/api/styletransfer",method:"POST",contentType:"application/json",data:JSON.stringify(d),success:function(e){console.log(e.result)}}),$("#transfer").hide(),$("#processing").show();var y=setTimeout(e,5e3),f=null})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImltYWdlcGlja2VyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIndpZHRoIiwiaGVpZ2h0IiwiZ2V0Q29udGV4dCIsImNsaWNrIiwiY2hlY2tUcmFuc2ZlclN0YXR1cyIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImhpZGUiLCJzaGFwZSIsImN0eCIsImltYWdlRGF0YSIsIkltYWdlRGF0YSIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwicHV0SW1hZ2VEYXRhIiwiY29tcGxldGUiLCJjbGVhclRpbWVvdXQiLCJpbnRlcnZhbElEIiwic2hvdyIsInNldFRpbWVvdXQiLCJjb250ZW50dXJsIiwidmFsIiwiY29udGVudGRvd25sb2FkdXJsIiwiY29udGVudHVybGxpc3QiLCJzcGxpdCIsImNvbnRlbnRuYW1lIiwibGVuZ3RoIiwiSlNPTiIsInN0cmluZ2lmeSIsImltZyIsInN0eWxldXJsIiwic3R5bGVkb3dubG9hZHVybCIsInN0eWxldXJsbGlzdCIsInN0eWxlbmFtZSIsImlzaXplIiwiTnVtYmVyIiwic3NpemUiLCJjdyIsInN3cyIsIm1hcCIsInR3IiwiaW5wdXQiLCJjb250ZW50X2ltYWdlIiwic3R5bGVfaW1hZ2UiLCJpbWFnZV9zaXplIiwic3R5bGVfc2l6ZSIsImNvbnRlbnRfbGF5ZXIiLCJjb250ZW50X3dlaWdodCIsInN0eWxlX2xheWVycyIsInN0eWxlX3dlaWdodHMiLCJ0dl93ZWlnaHQiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUFBLEdBQUUsV0FDQUEsRUFBRSxxQkFBcUJDLGFBRXZCLElBQUlDLEdBQVNDLFNBQVNDLGVBQWUsU0FDckNGLEdBQU9HLE1BQVEsSUFDZkgsRUFBT0ksT0FBUyxHQUNOSixHQUFPSyxXQUFXLEtBRTVCUCxHQUFFLGFBQWFRLE1BQU0sV0FnRm5CLFFBQVNDLEtB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dW5jdGlvbiAoKSB7XG4gICQoJy5zdHlsZUltYWdlUGlja2VyJykuaW1hZ2VwaWNrZXIoKTtcblxuICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dCcpO1xuICBjYW52YXMud2lkdGggPSA1MDA7XG4gIGNhbnZhcy5oZWlnaHQgPSA1MDA7XG4gIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAkKCcjdHJhbnNmZXInKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgY29udGVudHVybCA9ICcnO1xuICAgIGlmICgkKCcjY29udGVudEltYWdlVXJsJykudmFsKCkgPT0gJycpIHtcbiAgICAgIGNvbnRlbnR1cmwgPSAnc3RhdGljL2ltZ3MvaG9sbHl3b29kLmpwZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb250ZW50ZG93bmxvYWR1cmwgPSAkKCcjY29udGVudEltYWdlVXJsJykudmFsKCk7XG4gICAgICB2YXIgY29udGVudHVybGxpc3QgPSBjb250ZW50ZG93bmxvYWR1cmwuc3BsaXQoJy8nKTtcbiAgICAgIHZhciBjb250ZW50bmFtZSA9IGNvbnRlbnR1cmxsaXN0W2NvbnRlbnR1cmxsaXN0Lmxlbmd0aCAtIDFdO1xuICAgICAgY29uc29sZS5sb2coY29udGVudGRvd25sb2FkdXJsKTtcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDogJy9hcGkvZG93bmxvYWRfaW1nJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsgJ3VybCc6IGNvbnRlbnRkb3dubG9hZHVybCB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3NmdWxseSBkb3dubG9hZGVkIGNvbnRlbnQgaW1nOiAnICsgZGF0YS5pbWcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnRlbnR1cmwgPSAnaW5zdGFuY2UvJyArIGNvbnRlbnRuYW1lO1xuICAgIH1cblxuICAgIHZhciBzdHlsZXVybCA9ICcnO1xuICAgIGlmICgkKCcjc3R5bGVJbWFnZVVybCcpLnZhbCgpID09ICcnKSB7XG4gICAgICBzdHlsZXVybCA9ICdzdGF0aWMvaW1ncy8nICsgJChcIi5zdHlsZUltYWdlUGlja2VyXCIpLnZhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc3R5bGVkb3dubG9hZHVybCA9ICQoJyNzdHlsZUltYWdlVXJsJykudmFsKCk7XG4gICAgICB2YXIgc3R5bGV1cmxsaXN0ID0gc3R5bGVkb3dubG9hZHVybC5zcGxpdCgnLycpO1xuICAgICAgdmFyIHN0eWxlbmFtZSA9IHN0eWxldXJsbGlzdFtzdHlsZXVybGxpc3QubGVuZ3RoIC0gMV07XG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6ICcvYXBpL2Rvd25sb2FkX2ltZycsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7ICd1cmwnOiBzdHlsZWRvd25sb2FkdXJsIH0pLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQgc3R5bGUgaW1nOiAnICsgZGF0YS5pbWcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHN0eWxldXJsID0gJ2luc3RhbmNlLycgKyBzdHlsZW5hbWU7XG4gICAgfVxuXG4gICAgdmFyIGlzaXplID0gTnVtYmVyKCQoJyNjb250ZW50U2l6ZScpLnZhbCgpKTtcbiAgICB2YXIgc3NpemUgPSBOdW1iZXIoJCgnI3N0eWxlU2l6ZScpLnZhbCgpKTtcbiAgICB2YXIgY3cgPSBOdW1iZXIoJCgnI2NvbnRlbnRXZWlnaHQnKS52YWwoKSk7XG4gICAgdmFyIHN3cyA9ICQoJyNzdHlsZVdlaWdodHMnKS52YWwoKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgIHZhciB0dyA9IE51bWJlcigkKCcjdHZXZWlnaHQnKS52YWwoKSk7XG5cbiAgICBjb25zb2xlLmxvZyhjb250ZW50dXJsKTtcbiAgICBjb25zb2xlLmxvZyhzdHlsZXVybCk7XG4gICAgY29uc29sZS5sb2coaXNpemUpO1xuICAgIGNvbnNvbGUubG9nKHNzaXplKTtcbiAgICBjb25zb2xlLmxvZyhjdyk7XG4gICAgY29uc29sZS5sb2coc3dzKTtcbiAgICBjb25zb2xlLmxvZyh0dyk7XG5cbiAgICB2YXIgaW5wdXQgPSB7XG4gICAgICAnY29udGVudF9pbWFnZSc6IGNvbnRlbnR1cmwsXG4gICAgICAnc3R5bGVfaW1hZ2UnOiBzdHlsZXVybCxcbiAgICAgICdpbWFnZV9zaXplJzogaXNpemUsXG4gICAgICAnc3R5bGVfc2l6ZSc6IHNzaXplLFxuICAgICAgJ2NvbnRlbnRfbGF5ZXInOiAzLFxuICAgICAgJ2NvbnRlbnRfd2VpZ2h0JzogY3csXG4gICAgICAnc3R5bGVfbGF5ZXJzJzogWzEsIDQsIDYsIDddLFxuICAgICAgJ3N0eWxlX3dlaWdodHMnOiBzd3MsXG4gICAgICAndHZfd2VpZ2h0JzogdHdcbiAgICB9O1xuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJy9hcGkvc3R5bGV0cmFuc2ZlcicsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShpbnB1dCksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS5yZXN1bHQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgICQoJyN0cmFuc2ZlcicpLmhpZGUoKTtcbiAgICAkKCcjcHJvY2Vzc2luZycpLnNob3coKTtcbiAgICB2YXIgaW50ZXJ2YWxJRCA9IHNldFRpbWVvdXQoY2hlY2tUcmFuc2ZlclN0YXR1cywgNTAwMCk7XG4gICAgdmFyIGltYWdlRGF0YSA9IG51bGw7XG4gICAgZnVuY3Rpb24gY2hlY2tUcmFuc2ZlclN0YXR1cygpIHtcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDogJy9hcGkvY2hlY2tUcmFuc2ZlclN0YXR1cycsXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEucmVzdWx0KTtcbiAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgJCgnI3Byb2Nlc3NpbmcnKS5oaWRlKCk7XG4gICAgICAgICAgICB2YXIgc2hhcGUgPSBkYXRhLnJlc3VsdFswXTtcblxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXQnKTtcbiAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICAgICAgaW1hZ2VEYXRhID0gbmV3IEltYWdlRGF0YShuZXcgVWludDhDbGFtcGVkQXJyYXkoZGF0YS5yZXN1bHRbMV0pLCBzaGFwZVsxXSwgc2hhcGVbMF0pO1xuICAgICAgICAgICAgY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKGRhdGEpIHtcbiAgICAgICAgICBpZiAoaW1hZ2VEYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChpbnRlcnZhbElEKTtcbiAgICAgICAgICAgIGltYWdlRGF0YSA9IG51bGw7XG4gICAgICAgICAgICAkKCcjdHJhbnNmZXInKS5zaG93KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tUcmFuc2ZlclN0YXR1cywgNTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7Il19
